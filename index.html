<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸç¥ - æ¸¸æˆå¯åŠ¨å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0c;
            color: #e8dccc;
            font-family: 'Microsoft YaHei', sans-serif;
            min-height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
            padding: 20px;
        }

        .title {
            font-size: 2em;
            color: #d5b87e;
            text-shadow: 0 0 15px rgba(213, 184, 126, 0.5);
            margin-bottom: 20px;
        }

        .launch-btn {
            background: linear-gradient(45deg, #3a2e22, #584531);
            border: 2px solid #d5b87e;
            color: #d5b87e;
            padding: 12px 40px;
            font-size: 1.2em;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            max-width: 300px;
        }

        .launch-btn:hover {
            background: linear-gradient(45deg, #584531, #3a2e22);
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(213, 184, 126, 0.3);
        }

        .queue-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(18, 16, 14, 0.95);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            text-align: center;
            display: none;
            width: 90%;
            max-width: 400px;
        }

        .queue-text {
            font-size: 1em;
            color: #d5b87e;
            margin: 10px 0;
        }

        .cancel-btn {
            background: #3a2e22;
            border: 1px solid #d5b87e;
            color: #d5b87e;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s;
            width: 100%;
            max-width: 200px;
        }

        .cancel-btn:hover {
            background: #d5b87e;
            color: #3a2e22;
        }

        #video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: none;
            z-index: 999;
        }

        #startup-video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .final-message {
            position: fixed;
            top: 40%; /* è°ƒæ•´æç¤ºä½ç½® */
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #fff;
            font-size: 1.5em;
            z-index: 1000;
            width: 90%;
            max-width: 400px;
        }

        #dance-container {
            position: fixed;
            top: 60%; /* è°ƒæ•´åˆ°æç¤ºä¸‹æ–¹ */
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            max-width: 300px;
            height: auto;
            z-index: 1001;
            display: none;
        }

        #dance-video {
            width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        /* æ‰‹æœºç«¯é€‚é… */
        @media (max-width: 480px) {
            .title {
                font-size: 1.5em;
            }

            .launch-btn {
                padding: 10px 30px;
                font-size: 1em;
            }

            .queue-panel {
                padding: 15px;
            }

            .queue-text {
                font-size: 0.9em;
            }

            .final-message {
                font-size: 1.2em;
                top: 30%; /* æ‰‹æœºç«¯æç¤ºä½ç½®æ›´é«˜ */
            }

            #dance-container {
                top: 50%; /* æ‰‹æœºç«¯è§†é¢‘ä½ç½®è°ƒæ•´ */
                width: 90%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">åŸç¥å¯åŠ¨å™¨</h1>
        <button class="launch-btn">å¼€å§‹æ¸¸æˆ</button>
    </div>

    <div class="queue-panel">
        <div class="queue-text">æ­£åœ¨è¿æ¥è®¤è¯æœåŠ¡å™¨...</div>
        <div class="queue-text" id="queueNum"></div>
        <div class="queue-text" id="queueTime"></div>
        <button class="cancel-btn">å–æ¶ˆå¯åŠ¨</button>
    </div>

    <div id="video-container">
        <video id="startup-video" muted>
            <source src="launch.mp4" type="video/mp4">
        </video>
    </div>

    <div id="dance-container">
        <video id="dance-video" muted loop>
            <source src="nailong.mp4" type="video/mp4">
        </video>
    </div>

    <script>
        let countdownTimer;

        // å¯åŠ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.querySelector('.launch-btn').addEventListener('click', () => {
            document.querySelector('.container').style.display = 'none';
            const queueNum = Math.floor(Math.random() * 5) + 1;
            
            document.querySelector('.queue-panel').style.display = 'block';
            document.getElementById('queueNum').textContent = `å½“å‰é˜Ÿåˆ—ä½ç½®ï¼šç¬¬ ${queueNum} ä½`;
            
            startCountdown(queueNum);
        });

        // å–æ¶ˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.querySelector('.cancel-btn').addEventListener('click', () => {
            if (confirm('æ¸¸æˆèµ„æºåŠ è½½å®Œæˆåº¦ 87%ï¼Œç¡®å®šè¦å–æ¶ˆå¯åŠ¨å—ï¼Ÿ')) {
                clearInterval(countdownTimer);
                showErrorMessage();
            }
        });

        // å€’è®¡æ—¶å‡½æ•°
        function startCountdown(seconds) {
            let countdown = seconds;
            updateTimerDisplay(countdown);
            
            countdownTimer = setInterval(() => {
                countdown--;
                updateTimerDisplay(countdown);

                if (countdown <= 0) {
                    clearInterval(countdownTimer);
                    startVideoPlayback();
                }
            }, 1000);
        }

        // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
        function updateTimerDisplay(seconds) {
            document.getElementById('queueTime').textContent = `é¢„è®¡ç­‰å¾…æ—¶é—´ï¼š${seconds}ç§’`;
            document.getElementById('queueTime').style.color = `hsl(${seconds * 50}, 70%, 50%)`;
        }

        // è§†é¢‘æ’­æ”¾æ§åˆ¶
        async function startVideoPlayback() {
            try {
                const videoContainer = document.getElementById('video-container');
                const video = document.getElementById('startup-video');
                
                document.querySelector('.queue-panel').style.display = 'none';
                videoContainer.style.display = 'block';
                
                // ç¡®ä¿è§†é¢‘å¯ä»¥æ’­æ”¾
                video.currentTime = 0;
                await video.play();
                
                // è§†é¢‘ç»“æŸå¤„ç†
                video.onended = () => {
                    showFinalMessage();
                    playNaiLongDance();
                }

            } catch (error) {
                console.error('è§†é¢‘æ’­æ”¾å¤±è´¥:', error);
                showErrorMessage();
            }
        }

        // æ˜¾ç¤ºæœ€ç»ˆæç¤º
        function showFinalMessage() {
            const message = document.createElement('div');
            message.className = 'final-message';
            message.innerHTML = `
                <div style="color:#ffdd55;margin-bottom:20px;">ä½ è¢«éª—äº† ğŸ˜œ</div>
                <div style="font-size:0.6em;">è¿™ä¸ªæŒ‰é’®æ ¹æœ¬æ²¡ç”¨ï¼</div>
            `;
            document.body.appendChild(message);
        }

        // æ’­æ”¾å¥¶é¾™è·³èˆè§†é¢‘
        function playNaiLongDance() {
            const danceContainer = document.getElementById('dance-container');
            const danceVideo = document.getElementById('dance-video');
            
            danceContainer.style.display = 'block';
            danceVideo.play();
        }

        // é”™è¯¯å¤„ç†
        function showErrorMessage() {
            document.querySelector('.queue-panel').innerHTML = `
                <div class="queue-text" style="color:#ff6666;font-size:1.2em;">
                    è¿æ¥å·²ä¸­æ–­ [é”™è¯¯ä»£ç : 420109]
                    <div style="font-size:0.8em;margin-top:15px">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•</div>
                </div>
            `;
            setTimeout(() => location.reload(), 3000);
        }
    </script>
</body>
</html>
